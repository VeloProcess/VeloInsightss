<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Velodados - Dashboard de Atendimentos</title>
    <link rel="stylesheet" href="css/colors.css">
    <link rel="stylesheet" href="css/styles.css">
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- PapaParse para parsing eficiente de CSV -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <!-- SheetJS para exporta√ß√£o Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <!-- jsPDF para exporta√ß√£o PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- html2canvas para captura de tela -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Header Fixo -->
    <header class="header">
        <div class="header-content">
            <div class="logo-container">
                <span class="logo-text">VeloInsights</span>
            </div>
            <h1 class="header-title">Dashboard de Atendimentos</h1>
        </div>
    </header>

    <!-- Sidebar -->
    <nav class="sidebar">
        <ul class="sidebar-nav">
            <li><a href="#overview" class="nav-link active" data-section="overview">üìä Vis√£o Geral</a></li>
            <li><a href="#operators" class="nav-link" data-section="operators">üë• Operadores</a></li>
            <li><a href="#ranking" class="nav-link" data-section="ranking">üèÜ Ranking</a></li>
            <li><a href="#reports" class="nav-link" data-section="reports">üìà Relat√≥rios</a></li>
        </ul>
    </nav>

    <!-- √Årea Principal -->
    <main class="main-content">
        <!-- Se√ß√£o: Vis√£o Geral -->
        <section id="overview" class="content-section active">
            <h2>Vis√£o Geral da Equipe</h2>
            
            <!-- Upload de Arquivo -->
            <div class="upload-area" id="uploadArea">
                <div class="upload-content">
                    <h3>üìÅ Fa√ßa upload do arquivo de dados</h3>
                    <p>Arraste e solte um arquivo CSV ou Excel aqui, ou clique para selecionar</p>
                    <p class="file-size-info">Arquivos at√© 50MB s√£o processados no navegador. Arquivos maiores s√£o enviados para o servidor.</p>
                    <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" style="display: none;">
                    <button class="btn" onclick="document.getElementById('fileInput').click()">
                        Selecionar Arquivo
                    </button>
                </div>
                
                <!-- Indicador de Progresso -->
                <div class="progress-container" id="progressContainer" style="display: none;">
                    <div class="progress-header">
                        <h3>‚è≥ Processando arquivo...</h3>
                        <span class="progress-text" id="progressText">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-details" id="progressDetails">
                        <p>Iniciando processamento...</p>
                    </div>
                    <button class="btn btn-secondary" id="cancelProcessing" style="margin-top: 10px;">
                        Cancelar Processamento
                    </button>
                </div>
            </div>

            <!-- Cards de M√©tricas Gerais -->
            <div class="cards-grid" id="metricsCards">
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">üìû</div>
                        <h3 class="card-title">Total de Atendimentos</h3>
                    </div>
                    <div class="card-value" id="totalCalls">-</div>
                    <p class="card-subtitle">Atendimentos realizados</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">‚è±Ô∏è</div>
                        <h3 class="card-title">Tempo M√©dio</h3>
                    </div>
                    <div class="card-value" id="avgDuration">-</div>
                    <p class="card-subtitle">Minutos por atendimento</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">‚≠ê</div>
                        <h3 class="card-title">Nota Atendimento</h3>
                    </div>
                    <div class="card-value" id="avgRatingAttendance">-</div>
                    <p class="card-subtitle">Avalia√ß√£o m√©dia (1-5)</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">‚úÖ</div>
                        <h3 class="card-title">Nota Solu√ß√£o</h3>
                    </div>
                    <div class="card-value" id="avgRatingSolution">-</div>
                    <p class="card-subtitle">Efetividade da solu√ß√£o</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">üë•</div>
                        <h3 class="card-title">Operadores Ativos</h3>
                    </div>
                    <div class="card-value" id="activeOperators">-</div>
                    <p class="card-subtitle">Pessoas na equipe</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-icon">‚è∏Ô∏è</div>
                        <h3 class="card-title">Tempo de Pausa</h3>
                    </div>
                    <div class="card-value" id="avgPause">-</div>
                    <p class="card-subtitle">Minutos m√©dios de pausa</p>
                </div>
            </div>

            <!-- Gr√°ficos -->
            <div class="chart-container">
                <h3 class="chart-title">Atendimentos por Dia</h3>
                <canvas id="callsPerDayChart" width="400" height="200"></canvas>
            </div>

            <div class="chart-container">
                <h3 class="chart-title">Distribui√ß√£o das Avalia√ß√µes</h3>
                <canvas id="ratingsDistributionChart" width="400" height="200"></canvas>
            </div>
        </section>

        <!-- Se√ß√£o: Operadores -->
        <section id="operators" class="content-section">
            <h2>An√°lise Individual por Operador</h2>
            <div class="placeholder">
                <h3>An√°lise de Operadores</h3>
                <p>Esta se√ß√£o mostrar√° m√©tricas detalhadas de cada operador ap√≥s o upload dos dados.</p>
            </div>
        </section>

        <!-- Se√ß√£o: Ranking -->
        <section id="ranking" class="content-section">
            <h2>Ranking de Operadores</h2>
            <div class="placeholder">
                <h3>Ranking de Performance</h3>
                <p>Esta se√ß√£o mostrar√° o ranking ordenado dos operadores ap√≥s o upload dos dados.</p>
            </div>
        </section>

        <!-- Se√ß√£o: Relat√≥rios -->
        <section id="reports" class="content-section">
            <h2>Relat√≥rios e Exporta√ß√µes</h2>
            <div class="placeholder">
                <h3>Exporta√ß√£o de Dados</h3>
                <p>Esta se√ß√£o permitir√° exportar relat√≥rios em PDF e Excel ap√≥s o upload dos dados.</p>
                <div style="margin-top: 20px;">
                    <button class="btn" disabled>üìä Exportar Excel</button>
                    <button class="btn btn-secondary" disabled>üìÑ Exportar PDF</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="js/parser.js?v=13"></script>
    <script src="js/metrics.js?v=13"></script>
    <script src="js/velotax-parser.js?v=13"></script>
    <script src="js/large-file-parser.js?v=13"></script>
    <script src="js/ui.js?v=13"></script>
    <script src="js/export.js?v=13"></script>
</body>
</html>
